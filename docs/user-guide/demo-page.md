# デモページの使い方

> APIを直接触らずに、すべての機能を試せます。

---

## 概要

Nostalgicのデモページでは、**APIを直接叩かなくても**、フォームからすべての操作が可能です。

- サービスの作成・設定変更・削除
- データの操作（カウント、いいね、スコア送信、メッセージ投稿など）
- 管理者操作と投稿者操作の両方

---

## ページ構成

各サービスのページには2つのタブがあります。

### 「機能」タブ

- サービスの概要と特徴
- Web Componentの埋め込みサンプル
- テーマのプレビュー

### 「使い方」タブ

- サービスの作成フォーム
- 各種操作フォーム
- APIレスポンスの確認

---

## 共通の使い方

### 1. サービス作成

すべてのサービスで共通の手順：

1. **サイトURL**を入力（あなたのサイトのURL）
2. **オーナートークン**を入力（8-16文字の秘密のパスワード）
3. 「作成」ボタンをクリック
4. **公開ID**が表示されれば成功

### 2. 公開IDの使い方

- **公開ID**：表示・操作用（公開可能）
- **URL + トークン**：管理用（秘密にする）

### 3. 公開IDを忘れた場合

同じURL + トークンで「作成」を再実行すると、既存の公開IDが返されます。

---

## Counter（カウンター）

### できる操作

| 操作               | 説明                   | 必要な情報     |
| ------------------ | ---------------------- | -------------- |
| **作成**           | カウンターを新規作成   | URL + トークン |
| **カウントアップ** | 訪問数を1増やす        | 公開ID         |
| **取得**           | 現在のカウントを取得   | 公開ID         |
| **表示**           | SVG/テキスト形式で表示 | 公開ID         |
| **値設定**         | 任意の値に設定         | URL + トークン |
| **設定更新**       | Webhook URLなどを変更  | URL + トークン |
| **削除**           | カウンターを削除       | URL + トークン |

### 表示形式

- **JSON**: 全期間のデータ（累計、今日、昨日、週間、月間）
- **Text**: プレーンテキスト（数値のみ）
- **SVG**: 画像形式（サイト埋め込み用）

---

## Like（いいね）

### できる操作

| 操作         | 説明                      | 必要な情報     |
| ------------ | ------------------------- | -------------- |
| **作成**     | いいねボタンを新規作成    | URL + トークン |
| **トグル**   | いいね/取り消しを切り替え | 公開ID         |
| **取得**     | 現在のいいね数を取得      | 公開ID         |
| **設定更新** | Webhook URLなどを変更     | URL + トークン |
| **削除**     | いいねボタンを削除        | URL + トークン |

---

## Ranking（ランキング）

### できる操作

| 操作               | 説明                         | 必要な情報             |
| ------------------ | ---------------------------- | ---------------------- |
| **作成**           | ランキングを新規作成         | URL + トークン         |
| **スコア送信**     | 新しいスコアを登録（UPSERT） | 公開ID + 名前 + スコア |
| **取得**           | ランキング一覧を取得         | 公開ID                 |
| **エントリー削除** | 特定の名前を削除             | URL + トークン + 名前  |
| **全削除**         | 全エントリーをクリア         | URL + トークン         |
| **設定更新**       | 最大エントリー数などを変更   | URL + トークン         |
| **削除**           | ランキングを削除             | URL + トークン         |

### 作成時オプション

- **タイトル**: ランキングのタイトル
- **最大エントリー数**: 表示する上位件数（デフォルト: 100）
- **ソート順**: 降順（高い順）/ 昇順（低い順）

---

## BBS（掲示板）

### できる操作

BBSは**管理者**と**投稿者**で操作が分かれています。

#### 誰でもできる操作

| 操作     | 説明                 | 必要な情報          |
| -------- | -------------------- | ------------------- |
| **投稿** | メッセージを投稿     | 公開ID + メッセージ |
| **取得** | メッセージ一覧を取得 | 公開ID              |

#### 投稿者ができる操作

自分の投稿のみ編集・削除できます（IP + UserAgentで自動判定）。

| 操作               | 説明             | 必要な情報            |
| ------------------ | ---------------- | --------------------- |
| **メッセージ編集** | 自分の投稿を編集 | 公開ID + メッセージID |
| **メッセージ削除** | 自分の投稿を削除 | 公開ID + メッセージID |

#### 管理者ができる操作

オーナートークンで認証し、すべてのメッセージを管理できます。

| 操作               | 説明                       | 必要な情報                    |
| ------------------ | -------------------------- | ----------------------------- |
| **メッセージ編集** | 任意の投稿を編集           | URL + トークン + メッセージID |
| **メッセージ削除** | 任意の投稿を削除           | URL + トークン + メッセージID |
| **全削除**         | 全メッセージをクリア       | URL + トークン                |
| **設定更新**       | 最大メッセージ数などを変更 | URL + トークン                |
| **BBS削除**        | BBSを削除                  | URL + トークン                |

---

## APIレスポンスの見方

各フォームの下に、APIのレスポンスが表示されます。

### 成功時

```json
{
  "success": true,
  "data": {
    "id": "example-a7b9c3d4",
    ...
  }
}
```

### エラー時

```json
{
  "error": "エラーメッセージ"
}
```

エラーメッセージを確認して、入力内容を修正してください。

---

## Tips

### URL直接入力も可能

デモページで生成されるAPIのURLは、ブラウザのアドレスバーに直接入力しても動作します。これが1990年代Web文化の復活ポイントです。

### Webhook連携

各サービス作成時に`webhookUrl`を設定すると、イベント発生時にSlack/Discordなどに通知できます。

### 共有可能なURL

すべての操作がGET URLで完結するため、リンクを共有するだけで操作を伝えられます。

---

## 次のステップ

### 各サービスの詳細仕様

- [Counter API詳細](./services/counter.md)
- [Like API詳細](./services/like.md)
- [Ranking API詳細](./services/ranking.md)
- [BBS API詳細](./services/bbs.md)

### サイトへの埋め込み

- [テーマとスタイル](./customization.md)
- [API仕様](./api.md)
